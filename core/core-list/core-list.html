<link rel="import" href="../core-artc/core-artc.html">
<link rel="import" href="../../bower_components/core-scroll-threshold/core-scroll-threshold.html">

<polymer-element name="core-list">

  <template>
    <style>
      #list{
            width: 80%;
            margin: 20px auto;
            height: 500px;
      }
      #scroller {
        padding: 20px 15%;
        overflow: auto;
        margin-top: 4px;
      }
      @media(max-width:721px){
          #list{
            width: 95%;
          }
      }
    </style>
    <div id="scroller" fit>
      <div id="list"></div> 
      <div hidden?="{{!$.threshold.lowerTriggered}}">Please wait...</div>
    </div>   
<!--      <template repeat="{{item in listarticles}}"></template>-->
  </template>

  <script>
    (function () {
      function createPage(item) {
        var section = document.createElement('core-artc');
          section.setAttribute('layout', '');
          section.setAttribute('vertical', '');
          section.setAttribute('htitle', item.title);
          section.setAttribute('content', item.content);
          section.setAttribute('date', item.date);
          section.setAttribute('bgimg', item.bgimg);
          section.setAttribute('owner', item.iduser);
          section.setAttribute('idart', item._id);
          section.setAttribute('coments', item.coments);
        var div = document.createElement('core-card');
          div.setAttribute('css', 'article');
          div.setAttribute('layout', '');
          div.setAttribute('vertical', '');
          div.appendChild(section);
        return div;
      }
      Polymer({
        domReady:function(){
          var that=this;
          addEventListener('sender-list',function(rescue){
            var list=rescue.detail;
            list.forEach(function (item) {
              //that.listarticles.push(createPage(item)); 
              that.$.list.appendChild(createPage(item)); 
            });
          });
        },
        loadMore: function() {
          setTimeout(function() {
            this.fire('endofpage');
            this.$.threshold.clearLower();
          }.bind(this), 1000);
        }
      });
    })();
  </script>

</polymer-element>