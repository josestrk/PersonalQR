<!--
low rendiment but in the future will be serch all aplication
contacts, articcles, ...
-->

<polymer-element name="search-banner">
  <template>
   
    <style>
    @import 'jquery.typeahead.css';
    :host {
        height: 30px;
        border-radius: 20px;
        box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px, rgba(0, 0, 0, 0.0980392) 0px 0px 3px;
        margin: 15px 15px 10px;
        padding: 2px 5px;
        border: 2px solid #fff;
        color: white;
        font-weight: 300;
    }
    #core_icon1 {
        height: 30px;
        width: 10%;
    }
    #core_input {
        width: 80%;
        padding: 10px;
    }
    </style>
    

        <div class="typeahead-container">
            <div class="typeahead-field">

                <span class="typeahead-query">
                    
                      <input id="q"
                           name="q"
                           type="search"
                           placeholder="Search"
                           autocomplete="off">
                </span> 
            </div>
        </div>
        <core-icon icon="search" id="core_icon1"></core-icon>
  </template>
  <script src="../../../bower_components/jquery/dist/jquery.min.js"></script>
  <script src="jquery.typeahead.js"></script>
  <script>
    (function () { 
        var base='/topics';
        
        function defaultAjaxErrorHandler(xhr, err, desc) {
            console.log(xhr, err, desc);
            var errorToast = document.querySelector('#errorToast');
            errorToast.text = '[' +xhr.status + '] ' + desc + ': ' + xhr.response;
            errorToast.show();
        }
        function doAjax(options, success, error) {
            options.type = options.type || 'GET';
            options.url = base + (options.url || '');
            options.dataType = options.dataType || 'json';
            options.contentType = options.contentType || 'application/json; charset=UTF-8';
            options.success = success;
            options.error = (typeof error === 'function') ? error : defaultAjaxErrorHandler;
            debugger
            $.ajax(options);
        }
        function search(){
            
            $(this.$.q).typeahead({
                minLength: 1,
                order: "asc",
                group: true,
                hint: true,
                list: false,
                backdrop: false,
                source: {
                    topics: {
                        data: tp.countries
                    }
                }
            });
        }
        
        var tp = {
            topics: []
        };
        
        Polymer('search-banner', {
            showTopic: function() {
                    doAjax({type: 'GET'}, function(data) {
                        debugger
                        this.tp.topics.push(data);
                    }.bind(this));
            },
            ready: function () {
                search.bind(this)();
            }
        });
    }());
  </script>
</polymer-element>

