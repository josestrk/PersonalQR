<link rel="import" href="../../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/core-icon/core-icon.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../core/core-ajax-handler.html">

<polymer-element name="myp-page" attributes="id">

  <template>
    <style>
      #list {
        width:70%;
        height:400px;
        margin: 20px auto;
      }
    </style>
    <core-ajax-handler id="ajaxhandler"></core-ajax-handler>
    <main-menu iMenu="My profile">
        <div class="title">My profile</div>
        <div id="list">
        <template repeat="{{item in lista}}"></template>
        </div>
        <core-card><core-icon icon="load"></core-icon></core-card>
    </main-menu>
  </template>

  <script>
    (function () {
        function createPage(item) {
          var section = document.createElement('core-artc');
          section.setAttribute('layout', '');
          section.setAttribute('vertical', '');
          section.setAttribute('title', item.title);
          section.setAttribute('date', item.date);
          section.setAttribute('bgimg', item.bgimg);
          section.setAttribute('content', item.content);


        var div = document.createElement('core-card');
        div.setAttribute('id','list');
        div.setAttribute('layout', '');
        div.setAttribute('vertical', '');

        div.appendChild(section);

        return div;
        }

        Polymer({
            domReady: function () {
                var listPost = this.$.list;
                this.lista.forEach(function (item) {
                   listPost.appendChild(createPage(item));
                });
            },
            ready: function(){
              var ajaxhandler = this.$.ajaxhandler;
              ajaxhandler.getArticles(this.id,function (result){
                if(result){
                  this.lista=result;
                }
              });
            }
        });
    })();
  </script>

</polymer-element>
