<link rel="import" href="../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/core-icon/core-icon.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/core-input/core-input.html">
<link rel="import" href="../bower_components/core-icons/av-icons.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../core/core-editor/core-editor-text.html">
<link rel="import" href="../core/core-editor/core-editor-img.html">
<link rel="import" href="../core/core-ajax-handler.html">


<polymer-element name="editor-page" attributes="userid">

  <template>
  <style>
  :host {
    position: absolute;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
  }
  #core_card {
    width: 100%;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    border-bottom-right-radius: 2px;
    border-bottom-left-radius: 2px;
    box-shadow: rgba(0, 0, 0, 0.0980392) 0px 2px 4px, rgba(0, 0, 0, 0.0980392) 0px 0px 3px;
    left: 0px;
    top: 0px;
    background-color: rgb(255, 255, 255);
  }
  #input {
    padding: 30px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    border-bottom-left-radius: 10px;
    margin: 60px auto 0px;
    width: 60%;
  }
  #input2 {
    padding: 30px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    border-bottom-left-radius:10px;
    margin: 30px auto 30px;
    width: 60%;
  }
  #core_icon_button {
    left: 1430px;
    top: 500px;
  }
  #paper_fab {
    left: 1520px;
    top: 440px;
  }
  </style>
  <core-ajax-handler id="ajaxhandler"></core-ajax-handler>
    <main-menu iMenu="Edition Mode"  iduser="{{id}}">
        <div class="title">Editor</div>
        <div>
          <core-card id="core_card" layout vertical>
                <input id="input" placeholder="Title articcle" is="core-input">
                <core-editor-img id="editor" vertical layout  center-justified></core-editor-img>
                <textarea id="input2" rows="20" placeholder="You said..." maxlength="8000" aria-invalid="false" ></textarea>
                <core-editor-text id="input2"></core-editor-text>
                <paper-fab icon="create" class="blue" on-click="{{sendArticle}}" role="button" tabindex="0" aria-label="create" style="overflow: visible; left: 45%; margin:20px 0px 100px; "></paper-fab>
          </core-card>
        </div>
    </main-menu>

  </template>

  <script>
  (function () {
    Polymer({
      sendArticle: function(){
        var datos={
          iduser: document.URL.split('/').reverse()[0].split('=').reverse()[0],
          title: this.$.input.value,
          content:this.$.input2.value,
          bgimg: this.$.editor.$.imgselect.selected
        }
        var ajaxhandler = this.$.ajaxhandler;
        ajaxhandler.sendArticle(JSON.stringify(datos));
      }
    });
  })();
  </script>

</polymer-element>
